<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>XX Wiki</title>
    <script src="https://cdn.tawk.to/your-script-id/default.js" async></script>
     <!-- CSS 样式 -->
    <style>
        /* 基础样式 */
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* 顶栏样式 */
        #top-bar {
            background: var(--primary-color);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-button {
            color: white;
            padding: 0.5rem 1rem;
            margin: 0 0.5rem;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.3s;
        }

        .nav-button:hover {
            background: var(--secondary-color);
        }

        /* 主内容区 */
        #main-content {
            flex: 1;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .announcement {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .ad-banner {
            background: #e9ecef;
            height: 150px;
            margin: 2rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        /* 内容卡片 */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .content-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .content-card:hover {
            transform: translateY(-5px);
        }

        /* 页脚 */
        footer {
            background: var(--primary-color);
            color: white;
            padding: 2rem;
            text-align: center;
            margin-top: auto;
        }

        /* 登录表单 */
        .login-form {
            max-width: 400px;
            margin: 2rem auto;
            padding: 2rem;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        /* 编辑器样式 */
        .editor-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        #editor {
            width: 100%;
            height: 400px;
            padding: 1rem;
            border: 1px solid #ccc;
            font-family: 'Consolas', monospace;
        }

        .preview-area {
            padding: 1rem;
            border: 1px solid #ddd;
            margin-top: 1rem;
            min-height: 200px;
        }

        .toolbar {
            margin-bottom: 1rem;
        }

        .toolbar button {
            padding: 0.3rem 0.5rem;
            margin-right: 0.5rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- 页面结构 -->
    <div id="top-bar">
        <div>
            <button class="nav-button" onclick="showPage('home')">首页</button>
            <button class="nav-button" onclick="showPage('about')">关于</button>
            <button class="nav-button" onclick="showPage('upload')">投稿</button>
        </div>
        <input type="text" id="search-bar" placeholder="搜索内容...">
        <div id="user-section">
            <button class="nav-button" id="login-btn" onclick="handleAuth()">登录/注册</button>
        </div>
    </div>

    <div id="main-content">
        <!-- 各页面内容 -->
    </div>

    <footer>
        <p>联系我们：QQ群 12345678 | QQ号 87654321</p>
        <p>2025 © XXX网站</p>
    </footer>

    <!-- JavaScript -->
    <script>
        // 用户认证模块
        const Auth = {
            showForm: () => {
                const form = `
                    <div class="login-form">
                        <h2>用户登录</h2>
                        <input type="text" id="username" placeholder="用户名">
                        <input type="password" id="password" placeholder="密码">
                        <button onclick="Auth.login()">登录</button>
                        <button onclick="Auth.register()">注册</button>
                    </div>`;
                document.getElementById('main-content').innerHTML = form;
            },

            login: () => {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const user = JSON.parse(localStorage.getItem(`user_${username}`));
                
                if(user && user.password === password) {
                    localStorage.setItem('currentUser', username);
                    UI.updateUserSection();
                    showPage('home');
                } else {
                    alert('用户名或密码错误');
                }
            },

            register: () => {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                if(localStorage.getItem(`user_${username}`)) {
                    alert('用户名已存在');
                    return;
                }
                
                localStorage.setItem(`user_${username}`, JSON.stringify({
                    password: password
                }));
                
                alert('注册成功');
                Auth.login();
            },

            logout: () => {
                localStorage.removeItem('currentUser');
                UI.updateUserSection();
                showPage('home');
            }
        };

        // 用户界面模块
        const UI = {
            updateUserSection: () => {
                const userSection = document.getElementById('user-section');
                const currentUser = localStorage.getItem('currentUser');
                
                if(currentUser) {
                    userSection.innerHTML = `
                        <div class="user-menu">
                            <span class="nav-button">${currentUser}</span>
                            <button class="nav-button" onclick="Auth.logout()">退出</button>
                        </div>`;
                } else {
                    userSection.innerHTML = '<button class="nav-button" onclick="handleAuth()">登录/注册</button>';
                }
            }
        };

        // 搜索模块
        const Search = {
            init: () => {
                document.getElementById('search-bar').addEventListener('input', (e) => {
                    const term = e.target.value.toLowerCase();
                    const cards = document.querySelectorAll('.content-card');
                    
                    cards.forEach(card => {
                        const title = card.querySelector('h3').textContent.toLowerCase();
                        const content = card.querySelector('p').textContent.toLowerCase();
                        card.style.display = (title.includes(term) || content.includes(term)) 
                            ? 'block' 
                            : 'none';
                    });
                });
            }
        };

        // 初始化
        window.onload = () => {
            UI.updateUserSection();
            Search.init();
            showPage('home');
        };
    </script>

    <!-- 其他功能脚本 -->
    <script>
        // 页面导航模块
        function showPage(page) {
            const pages = {
                home: () => {
                    document.getElementById('main-content').innerHTML = `
                        <div class="announcement">
                            <h2>网站公告</h2>
                            <p>欢迎来到XX Wiki！当前版本为测试版，欢迎反馈建议。</p>
                        </div>
                        <div class="ad-banner">
                            <p>广告位招租</p>
                        </div>
                        <div class="content-grid" id="content-container"></div>`;
                    loadContent();
                },
                about: () => {
                    document.getElementById('main-content').innerHTML = `<h2>关于我们</h2>`;
                },
                upload: () => {
                    showEditor();
                }
            };
            
            pages[page] ? pages[page]() : console.error('未知页面:', page);
        }

        // 处理认证相关操作
        function handleAuth() {
            Auth.showForm();
        }
    </script>

    <!-- 文章编辑功能脚本 -->
    <script>
        // 文章编辑模块
        const Editor = {
            currentArticleId: null,
            
            show: (articleId) => {
                Editor.currentArticleId = articleId;
                document.getElementById('main-content').innerHTML = `
                    <div class="editor-container">
                        <div class="toolbar">
                            <button onclick="Editor.insertText('== ', ' ==')">标题</button>
                            <button onclick="Editor.insertText('[[', ']]')">链接</button>
                            <button onclick="Editor.insertText('* ')">列表</button>
                        </div>
                        <textarea id="editor"></textarea>
                        <div class="preview-area" id="preview"></div>
                        <button onclick="Editor.save()">保存文章</button>
                    </div>`;
                
                if(articleId) {
                    const article = JSON.parse(localStorage.getItem(`article_${articleId}`));
                    document.getElementById('editor').value = article.rawContent;
                }
                
                Editor.addPreviewListener();
            },

            insertText: (before, after = '') => {
                // 插入文本逻辑
            },

            save: () => {
                // 保存文章逻辑
            }
        };
    </script>
</body>
</html>
